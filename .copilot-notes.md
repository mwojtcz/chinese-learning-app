# ğŸ¤– Copilot Notes - ChineseFlow

## ï¿½ Project Overview
**ChineseFlow** - Chinese learning app with HSK vocabulary, tests, and Chengyu idioms.
- **Current Version:** v1.4.0+5
- **Platform:** Flutter 3.24.5 (Windows, Web, Android ready)
- **Database:** 3,229 HSK 1-4 words + 5 Chengyu idioms
- **Target Users:** Polish/English speakers learning Chinese

## ğŸ¯ Project History
- **v1.0:** Initial release - basic vocabulary browser
- **v1.1.0:** Added HSK filtering, search improvements
- **v1.3.0:** Phase 1 start - Dashboard + Drawer navigation
- **v1.4.0:** Complete UI redesign - Dark theme, 2-column layout, Chengyu screen, smooth transitions

## ğŸ—ï¸ Current State (v1.4.0)

### âœ… What Works
- **Dashboard:** 2-column layout (Quick Actions left, Stats right), dark theme
- **Navigation:** Drawer with 6 screens, AnimatedSwitcher (300ms fade)
- **Chengyu:** 5 idioms with literal/actual meanings + examples
- **Dictionary:** Basic word list (HSK 1-4), traditional/simplified toggle
- **Database:** SQLite with 3,229 words, English + Polish translations
- **Builds:** Windows .exe, Web (GitHub Pages), Android .apk/.aab (GHA)

### â³ Placeholders (Not Implemented)
- **My Words:** Empty screen (no saved words system)
- **Tests:** Empty screen (no quiz system)
- **Settings:** Empty screen (no actual settings)
- **Search:** Dictionary has basic filter, needs full-text search
- **Statistics:** Dashboard shows hardcoded data (0 words learned, 3-day streak)
- **Progress Tracking:** No actual learning progress system

### ğŸ¨ Design System
- **Colors:** grey.shade900 (bg), grey.shade800 (cards), gold accents, burgundy gradients
- **Typography:** 13-36px range (user prefers LARGE fonts)
- **Animations:** 300ms FadeTransition with easeInOut
- **Icons:** 22-30px, gold for active items
- **Layout Philosophy:** Compact, more info on screen, minimal scrolling

## ï¿½ğŸ‘¤ User Preferences
- **Language:** Polish (komunikacja), English (kod)
- **Git Tool:** GitHub Desktop (NIE git CLI)
- **Keep Repo Clean:** Nie pushowaÄ‡ plikÃ³w pomocniczych (DEPLOYMENT.md, COMMIT_MESSAGE.txt itp.)
- **Short & Concise:** KrÃ³tkie odpowiedzi, bez gadania- **Slang:** "git" = "gitara" = "jest ok/super" (NOT GitHub!)
## ğŸ—ï¸ Project Structure
```
chinese-learning-app/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”œâ”€â”€ dashboard_screen.dart (2-column: Actions + Stats)
â”‚   â”‚   â”œâ”€â”€ home_screen.dart (6 screens, drawer nav, AnimatedSwitcher)
â”‚   â”‚   â”œâ”€â”€ chengyu_screen.dart (5 idioms)
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ widgets/ (dictionary_tab, my_words_tab, test_tab, settings_tab)
â”‚   â”œâ”€â”€ models/
â”‚   â””â”€â”€ services/
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ hsk_vocabulary.db (3,229 words HSK 1-4)
â”‚       â””â”€â”€ scripts/ (Python scraping/conversion)
â”œâ”€â”€ .github/workflows/
â”‚   â”œâ”€â”€ build-windows.yml (buduje .exe na tag v*)
â”‚   â””â”€â”€ deploy-web.yml (GitHub Pages)
â””â”€â”€ pubspec.yaml (v1.4.0+5)
```

## ğŸ¨ UI Theme
- **Background:** grey.shade900
- **Cards:** grey.shade800
- **Accent:** Gold (#FFD700, burgundy gradient)
- **Fonts:** 13-36px (large for accessibility)
- **Transitions:** AnimatedSwitcher, 300ms FadeTransition

## ğŸ“¦ Tech Stack
- **Flutter:** 3.24.5 stable
- **Target:** Windows desktop + Web (GitHub Pages)
- **Database:** SQLite (sqflite_common_ffi)
- **State:** Provider pattern
- **Navigation:** Drawer + AnimatedSwitcher

## ğŸš€ Deployment Workflow

### 1. Local Build & Test
```powershell
# Windows
flutter run -d windows              # Test locally
flutter build windows --release     # Build .exe
# .exe location: build\windows\x64\runner\Release\chinese_learning_app.exe

# MacBook (dla iOS)
flutter run -d macos                # Test na macOS
flutter build ios --release         # Wymaga Xcode + certyfikaty Apple
flutter build apk --release         # Android APK lokalnie
```

### 2. Commit (GitHub Desktop)
- Summary: `feat: opis` / `fix: opis`
- Description: Bullet points z emoji
- Commit to branch â†’ Push origin

### 3. Create Release
**W GitHub Desktop:**
- Repository â†’ Create Tag â†’ `v1.x.x`
- Push tag to origin

**GitHub Actions automatycznie:**
- âœ… Buduje Windows .exe
- âœ… Buduje Android .apk + .aab
- âœ… Pakuje pliki
- âœ… Tworzy Release na GitHub
- âœ… ZaÅ‚Ä…cza wszystkie buildy

**Potem rÄ™cznie na GitHub:**
- Dodaj description do release (z CHANGELOG.md)
- Publish release

### 4. Web Deployment
- GitHub Actions auto-deploy do `gh-pages` branch
- Strona: https://mwojtcz.github.io/chinese-learning-app/

## ğŸ”§ Common Commands
```powershell
# Hot reload (w running app)
r

# Clean build
flutter clean; flutter pub get; flutter build windows --release

# Check errors
flutter analyze

# Format code
flutter format lib/

# Update dependencies
flutter pub outdated
flutter pub upgrade
```

## ğŸ“ Version Bumping
1. Update `pubspec.yaml`: `version: 1.x.x+y`
2. Update `CHANGELOG.md`: Add v1.x.x section
3. Update `README.md`: Version badge, features
4. Update `TODO.md`: Mark completed phases
5. Commit via GitHub Desktop with proper summary/description
6. Create tag v1.x.x â†’ Push tag
7. GitHub Actions auto-builds Windows, Android, Web
8. Add release notes on GitHub manually

## ğŸ¨ UI Design Decisions (Important!)

### User Feedback Pattern
User iterates A LOT on UI. Typical flow:
1. "za maÅ‚e/duÅ¼e/jasne" â†’ Adjust
2. Test â†’ More feedback
3. Repeat 3-5 times until "ok git" (jest gitara = jest ok!)
4. Then commits via GitHub Desktop

### Key Learnings
- **Fonts:** User wants 20-50% LARGER than standard
- **Colors:** ALWAYS dark (grey.shade800/900), gold accents
- **Spacing:** Compact, more info visible
- **Animations:** 300ms fade, easeInOut (no jarring transitions)
- **Buttons:** Must be functional (no dead buttons)

### Typical UI Request Examples
- "czcionka za maÅ‚a" â†’ +2-4px minimum
- "kafle za duÅ¼e" â†’ Reduce padding drastically
- "biaÅ‚e tÅ‚o" â†’ grey.shade800/900
- "przeskakuje" â†’ Add AnimatedSwitcher
- "dalej za X" â†’ Iterate again (user needs 3-5 rounds)

## ğŸ¯ Key Features Status
- âœ… Dashboard (v1.3-1.4)
- âœ… Drawer Navigation (v1.3-1.4)
- âœ… Dark Theme (v1.4)
- âœ… Smooth Transitions (v1.4)
- âœ… Chengyu Screen (v1.4, 5/100)
- â³ Dictionary (basic, needs search)
- â³ My Words (placeholder)
- â³ Tests (placeholder)
- â³ Settings (placeholder)

## ğŸ—„ï¸ Database Info
- **HSK 1-4:** 3,229 words (implemented)
- **HSK 5-6:** 2,211 scraped (files ready, need OpenCC conversion + DeepL translation)
- **Chengyu:** 5 idioms (goal: 100)
- **Fields:** simplified, traditional, pinyin, english, polish, hsk_level
- **Location:** assets/data/hsk_vocabulary.db
- **Scripts:** Python scrapers in assets/data/scripts/

## ğŸ“‹ Next Steps / Roadmap

### Phase 2 Options (User Planning)
1. **HSK 5-6 Vocabulary** (~2 hours)
   - Convert scraped data with OpenCC
   - Translate with DeepL API
   - Import to database
   
2. **Expand Chengyu** (~6 hours)
   - Research 45-95 more idioms
   - Add search/filter features
   
3. **SRS (Spaced Repetition)** (~10 hours)
   - SM-2 algorithm implementation
   - Review UI
   - Integration with tests

### Immediate TODOs
- [ ] Test emoji fix on GitHub Pages (canvaskit renderer)
- [ ] Test Android build on tag push
- [ ] Plan Phase 2 features

## ğŸ”§ Technical Details

### Key Components
**lib/screens/dashboard_screen.dart:**
- Two-column Row (flex 2:1)
- Left: Quick Actions (3 buttons - Dictionary, Tests, My Words)
- Right: Stats (4 cards - Total Words, Learned, Study Time, Tests)
- Bottom: 7-day progress bar, Today's Chengyu card
- All stats currently hardcoded (no backend logic)

**lib/screens/home_screen.dart:**
- Drawer navigation with 6 screens
- AnimatedSwitcher with ValueKey<int>(_selectedIndex)
- navigateToScreen(int index) method for external navigation
- Locked features: HSK 5-6, Grammar (grey with lock icon)

**lib/screens/chengyu_screen.dart:**
- ListView with 5 hardcoded idioms
- Card layout: Chinese (30px) â†’ Pinyin (17px) â†’ Literal (ğŸ“–) â†’ Meaning (ğŸ’¡) â†’ Example (âœï¸)
- Data: List<Map<String, String>> (should migrate to model class)

**lib/widgets/dictionary_tab.dart:**
- SQLite query with HSK filter
- Traditional/Simplified toggle (Provider)
- Emoji toggle (ğŸ¨/A)
- Search: Basic filter (not full-text)
- Needs improvement: Add pinyin search, better UX

**lib/services/database_service.dart:**
- sqflite_common_ffi for Windows
- loadVocabulary(int? hskLevel) method
- Database path: assets/data/hsk_vocabulary.db
- No caching (queries on every rebuild)

### Known Issues
1. **Web emoji:** Fixed with --web-renderer canvaskit (not tested yet)
2. **Stats hardcoded:** Dashboard shows fake data
3. **No search:** Dictionary needs full-text search
4. **No persistence:** My Words, progress not saved
5. **Database performance:** No indexing, no caching

## ğŸ’» Development Environments

### Windows PC (Primary)
- GitHub Desktop for commits
- PowerShell for Flutter commands
- VS Code with Copilot
- flutter run -d windows

### MacBook (Secondary)
- Same GitHub repo
- VS Code with Copilot
- Used for iOS builds (when needed)
- flutter run -d macos

## ğŸ› Common Issues
1. **Hot reload nie dziaÅ‚a** â†’ Full restart (q â†’ flutter run)
2. **Database not found** â†’ Check `assets/data/hsk_vocabulary.db` in pubspec.yaml
3. **Build fails** â†’ flutter clean; flutter pub get
4. **Font too small** â†’ User prefers BIG fonts (20-50% larger than standard)
5. **Emoji on web** â†’ Use --web-renderer canvaskit (fixed in deploy-web.yml)
6. **Stats showing 0** â†’ Hardcoded placeholders, no real tracking yet

## ğŸ” Important Files to Track

### Never Push to GitHub
- DEPLOYMENT.md (deleted, was temp helper)
- COMMIT_MESSAGE.txt (deleted, was temp helper)
- Any /scripts/temp/ files

### Always Update Together
- pubspec.yaml (version)
- CHANGELOG.md (release notes)
- README.md (version badge, features)
- TODO.md (completed tasks)

### Critical for App
- assets/data/hsk_vocabulary.db (database)
- lib/screens/*.dart (all screens)
- .github/workflows/*.yml (CI/CD)

## ğŸš¨ Emergency Contacts / Resources
- **Flutter Docs:** https://docs.flutter.dev
- **HSK Data Source:** assets/data/scripts/scrape_hsk.py
- **GitHub Repo:** https://github.com/mwojtcz/chinese-learning-app
- **Web Demo:** https://mwojtcz.github.io/chinese-learning-app/
- **DeepL API:** For Polish translations (future HSK 5-6)

## ğŸ“Š Project Statistics
- **Total Lines:** ~5,000 (estimated)
- **Development Time:** Started Dec 2024
- **Last Major Update:** v1.4.0 (2025-12-19)
- **Active Development:** Windows PC (daily), MacBook (occasional)
- **Test Users:** 1 (user/developer)

---
**Last Updated:** 2025-12-19 23:30 CET
**Current Machine:** Windows PC
**Next Session:** Test Android build, plan HSK 5-6 import

## ğŸ“‹ Typical User Requests
- "czcionka za maÅ‚a" â†’ Increase by 2-4px minimum
- "za duÅ¼e kafle" â†’ Reduce padding/spacing drastically
- "biaÅ‚e tÅ‚o" â†’ Change to grey.shade800/900
- "przeskakuje" â†’ Add AnimatedSwitcher with fade

## ğŸ¨ Design Philosophy
- **Dark First:** Always grey.shade800/900
- **Large Typography:** Accessibility > aesthetics
- **Compact Layouts:** More info on screen, less scrolling
- **Smooth Animations:** 300ms easeInOut everywhere
- **Functional Buttons:** Every button must navigate/do something

## ğŸ“‚ Files to NEVER Push
- .copilot-notes.md (this file)
- DEPLOYMENT.md
- COMMIT_MESSAGE.txt
- Any temp/helper files for Copilot

Add to .gitignore:
```
.copilot-notes.md
DEPLOYMENT.md
COMMIT_MESSAGE.txt
```

## ğŸ”„ Typical Session Flow
1. User: "zrÃ³bmy X"
2. Me: Implement changes
3. User: "za maÅ‚e/duÅ¼e/jasne"
4. Me: Iterate 3-5x based on feedback
5. User: "git"
6. Me: Help with GitHub Desktop commit message
7. User: "release"
8. Me: Remind about tag â†’ GitHub Actions

## âœ… Release Checklist
- [ ] Version bumped in pubspec.yaml
- [ ] CHANGELOG.md updated
- [ ] README.md updated (version badge, features)
- [ ] TODO.md updated (completed phases)
- [ ] Code builds locally without errors
- [ ] Commit message prepared (summary + description)
- [ ] Push to main via GitHub Desktop
- [ ] Create tag v1.x.x
- [ ] Push tag (triggers GitHub Actions)
- [ ] Wait for Actions to build
- [ ] Add release notes on GitHub
- [ ] Test downloaded .exe

---
**Last Updated:** 2025-12-19 (v1.4.0 release)
**Next:** HSK 5-6 vocabulary or more Chengyu
